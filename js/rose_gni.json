{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "data": {
    "url": "https://raw.githubusercontent.com/linsze/FIT3179/master/data/GNI.csv"
  },
  "transform": [
    {"filter": "datum['Estimated Gross National Income per Capita'] > 0"}
  ],
  "layer": [
    {
      "mark": {"type": "arc", "innerRadius": 0, "stroke": "#fff"},
      "transform": [
        {
          "aggregate": [
            {
              "op": "mean",
              "field": "Estimated Gross National Income per Capita",
              "as": "Mean GNI"
            }
          ],
          "groupby": ["Continent", "Gender"]
        }
      ],
      "encoding": {
        "theta": {
          "field": "Mean GNI",
          "type": "quantitative",
          "stack": "normalize"
        },
        "radius": {
          "field": "Mean GNI",
          "scale": {"type": "sqrt", "rangeMin": 40}
        },
        "radius2": {},
        "color": {
          "field": "Continent",
          "type": "nominal",
          "scale": {
            "domain": [
              "Africa",
              "Asia",
              "Europe",
              "North America",
              "Oceania",
              "South America"
            ]
          }
        },
        "opacity": {
          "condition": {"test": "datum.Gender == 'Male'", "value": 1},
          "value": 0.7
        },
        "tooltip": [
          {"field": "Gender", "type": "nominal"},
          {"field": "Mean GNI", "type": "quantitative", "format": ".2f"}
        ]
      }
    }
  ],
  "view": {"stroke": null},
  "config": {}
}